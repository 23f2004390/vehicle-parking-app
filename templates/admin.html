<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
        <link
    href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
    rel="stylesheet"/>
    <link rel="stylesheet" href="/static/css/admin.css">

</head>
<body>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash-overlay" onclick="this.remove()">
                    <div class="flash-message flash-{{ category }}" onclick="event.stopPropagation()">
                        <p>{{ message }}</p>
                        <button class="login-btn" onclick="this.closest('.flash-overlay').remove()">OK</button>
                    </div>
                </div>
            {% endfor %}
        {% endif %}
        {% endwith %}
    <div class="container">
        
        <div class="sidebar" >
            <div class="profile">
                <h1 style="border-bottom: 1px solid #d3caca81;">  Admin</h1>
            </div>
            <div class="nav">
                <nav class="nav-item"><a href="#dashboard" class="active">üìä Dashboard</a></nav>
                <div class="nav-item"><a href="#search-section" class="active">üÖøÔ∏è Parking Lots</a></div>
                <div class="nav-item"><a href="javascript:void(0)" onclick="openUsersPopup()" class="active">üôé User</a></div>
                <div class="nav-item"><a href="javascript:void(0)" onclick="openBookingPopup()" class="active">üìã Bookings</a></div>
                <div class="nav-item"><a href="#summary" class="active">üìàSummary</a></div>
                <div class="nav-item"><a href="/logout" class="active"><i class="ri-login-box-fill" style="font-size: 2rem;"></i>Logout</a></div>
            </div>
        </div>
        <div class="main" id="dashboard">
            <div class="header">
                <div class="title">
                <h1>Admin Dashboard </h1>
                </div>
                <div class="header-icon">
                    <button>‚¨áÔ∏è</button>
                    <button>‚ò∞</button>
                </div>
            </div>
            <div class="four-row">
                <div class="row-card">
                    <div class="card-header">
                        <div class="card-title">Total Parking Lots</div>
                        <div class="card-icon">üÖøÔ∏è</div>
                    </div>
                    <div class="card-value">247</div>
                    <div class="card-change change-positive">
                        <i class="ri-arrow-up-line"></i>
                        +12% from last month
                    </div>
                </div>

                <div class="row-card">
                    <div class="card-header">
                        <div class="card-title">Active Users</div>
                        <div class="card-icon">üë•</div>
                    </div>
                    <div class="card-value">1,894</div>
                    <div class="card-change change-positive">
                        <i class="ri-arrow-up-line"></i>
                        +8.2% from last month
                    </div>
                </div>

                <div class="row-card">
                    <div class="card-header">
                        <div class="card-title">Total Revenue</div>
                        <div class="card-icon">üí∞</div>
                    </div>
                    <div class="card-value">‚Çπ89,450</div>
                    <div class="card-change change-positive">
                        <i class="ri-arrow-up-line"></i>
                        +15.3% from last month
                    </div>
                </div>

                <div class="row-card">
                    <div class="card-header">
                        <div class="card-title">Occupancy Rate</div>
                        <div class="card-icon">üìä</div>
                    </div>
                    <div class="card-value">72%</div>
                    <div class="card-change change-negative">
                        <i class="ri-arrow-down-line"></i>
                        -2.1% from last month
                    </div>
                </div>
            </div>

            <div class="content">
                <div class="left_column">
                    <!-- we can use jinja to show multiple line of content -->
                    <div class="card">
                        <h3>Recent Bookings</h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>User ID</th>
                                        <th>Parking Lot</th>
                                        <th>Duration</th>
                                        <th>Amount</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>USR001</td>
                                        <td>Velachery Central</td>
                                        <td>2.5 hrs</td>
                                        <td>‚Çπ150</td>
                                        <td><span class="status-badge status-active">Active</span></td>
                                    </tr>
                                    <tr>
                                        <td>USR002</td>
                                        <td>T. Nagar Plaza</td>
                                        <td>4 hrs</td>
                                        <td>‚Çπ240</td>
                                        <td><span class="status-badge status-active">Active</span></td>
                                    </tr>
                                    <tr>
                                        <td>USR003</td>
                                        <td>Anna Nagar Mall</td>
                                        <td>1.5 hrs</td>
                                        <td>‚Çπ90</td>
                                        <td><span class="status-badge status-inactive">Completed</span></td>
                                    </tr>
                                    <tr>
                                        <td>USR004</td>
                                        <td>Porur IT Park</td>
                                        <td>8 hrs</td>
                                        <td>‚Çπ480</td>
                                        <td><span class="status-badge status-active">Active</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Users info</h3>
                        <div class="user">
                            <div class="user-info">
                                <p><strong>User ID:</strong> USR001</p>
                                <p><strong>Name:</strong> John Doe</p>
                                <p><strong>Email:</strong> 2T7Fp@example.com</p>
                            </div>
                            <div class="user-actions">
                                <button class="action-btn" onclick="openUserEditPopup('USR001', 'John Doe', '2T7Fp@example.com', '123-456-7890')">Edit</button>
                                <button class="action-btn">Delete</button>
                            </div>
                        </div>
                        <div class="user">
                            <div class="user-info">
                                <p><strong>User ID:</strong> USR002</p>
                                <p><strong>Name:</strong> Jane Smith</p>
                                <p><strong>Email:</strong> 9GZc4@example.com</p>
                            </div>
                            <div class="user-actions">
                                <button class="action-btn" onclick="openUserEditPopup('USR002', 'Jane Smith', '9GzC4@example.com', '987-654-3210')">Edit</button>
                                <button class="action-btn">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="right_column">
                    <!-- we have to use jinja2 -->
                    <div class="card">
                        <h3>Parking Lot Performance</h3>
                        <div class="progress-item">
                            <div class="progress-header">
                                <span>Velachery Central</span>
                                <span>85%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 85%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-header">
                                <span>T. Nagar Plaza</span>
                                <span>92%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 92%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-header">
                                <span>Anna Nagar Mall</span>
                                <span>78%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 78%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-header">
                                <span>Porur IT Park</span>
                                <span>95%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 95%"></div>
                            </div>
                        </div>

                        <div class="stats-grid">
                            <div class="stat-box">
                                <div class="stat-number">4.2</div>
                                <div class="stat-label">Avg Rating</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number">128</div>
                                <div class="stat-label">Today's Bookings</div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Summary</h3>
                        <div class="summary-item">
                            <div class="summary-header">
                                <span>Total Revenue</span>
                                <span>‚Çπ89,450</span>
                            </div>
                            <div class="summary-bar">
                                <div class="summary-fill" style="width: 100%"></div>
                            </div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-header">
                                <span>Total Bookings</span>
                                <span>128</span>
                            </div>
                            <div class="summary-bar">
                                <div class="summary-fill" style="width: 100%"></div>
                            </div>
                        </div>
                        <div class="line_chart">
                            <canvas id="myChart">
                                <!-- Chart.js will render the chart here -->
                                
                            </canvas>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container-search" id="search-section">
        <!-- Search Section -->
        <div class="search-container">
            <h2 class="search-title">Search Parking Lots</h2>
            <div class="search-controls">
                <select class="search-dropdown" id="searchBy">
                    <option value="location">Search by Location</option>
                    <option value="user_id">Search by User ID</option>
                    <option value="lot_name">Search by Lot Name</option>
                </select>
                <input type="text" class="search-input" id="searchInput" placeholder=" search . . .">
                <button class="create-lot-btn" onclick="openCreateLotPopup()">
                    <i class="ri-add-line"></i> Create New Lot
                </button>

            </div>
            <div class="example-text">
                Example: Search parking lots by location, user ID, or lot name. e.g. "cityname like chennai", "user123", "Parking #12"
            </div>
        </div>



        <!-- Search Results Section -->
        <div class="results-grid" id="resultsGrid">
                <!-- Parking Lot 1 -->
                {% for lot in parking_lots %}
                <div class="parking-lot-card" data-location="{{ lot.address }}" data-name="{{ lot.prime_location_name }}" data-user_id="{{ lot.user_id }}" onclick="openBookingPopup('{{ lot.lot_id }}')">
                    <div class="lot-header">
                        <div class="lot-title">{{ lot.prime_location_name }}</div>
                        <div class="lot-actions">
                            <button class="action-btn" onclick="openLotEditPopup('{{ lot.lot_id }}', '{{ lot.prime_location_name }}', '{{ lot.address }}', {{ lot.pin_code }}, {{ lot.total_spots }})">Edit</button>
                            <button class="action-btn">Delete</button>
                        </div>
                    </div>
                    <div class="lot-info">
                        <p><strong>Location:</strong> {{ lot.address }}</p>
                        <p><strong>Occupied:</strong> {{ lot.total_spots - lot.available_spots }} spaces</p>
                    </div>
                    <div class="occupancy-bar">
                        <div class="occupancy-fill" style="width: {{ lot.available_spots / lot.total_spots * 100 }}%"></div>
                    </div>
                    <div class="spots-preview">
                        {% for spot in lot.spots %}
                            {% if spot.is_available %}
                                <div class="spot available">{{ spot.spot_number }}</div>
                            {% else %}
                                <div class="spot occupied">{{ spot.spot_number }}</div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
                


                
            </div>
        </div>
    </div>
<!-- ----------------------------------- -->
    <div class="container-summary" id="summary">
        <h2>Summary</h2>
        <p>Total Parking Lots: 247</p>
        <p>Total Users: 1,894</p>
        <p>Total Revenue: ‚Çπ89,450</p>
    </div>
    <footer>
        <p>&copy; {{ year|default(2025) }} Parking Management System</p>
    </footer>
<!-- ----------------------------form-------------- -->
<!-- User Edit  Popup --->
<div class="popup-overlay" id="userEditPopup">
    <div class="popup-form">
        <h3>Edit User</h3>
        <form id="userEditForm" method="POST" action="/user_edit">
            <input type="hidden" id="editUserId" name="user_id">
            
            <div class="form-group">
                <label for="editUserName">Name:</label>
                <input type="text" id="editUserName" name="name" required>
            </div>
            
            <div class="form-group">
                <label for="editUserEmail">Email:</label>
                <input type="email" id="editUserEmail" name="email" required>
            </div>
            
            <div class="form-group">
                <label for="editUserPhone">Phone:</label>
                <input type="tel" id="editUserPhone" name="phone">
            </div>
            <div class="form-group">
                <label for="editUserPassword">Password:</label>
                <input type="password" id="editUserPassword" name="password">
            </div>
            
            <div class="form-buttons">
                <button type="submit" class="submit-btn">Update User</button>
                <button type="button" class="cancel-btn" onclick="closePopup('userEditPopup')">Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-------- Parking  Lot Edit Popup -->
<div class="popup-overlay" id="lotEditPopup">
    <div class="popup-form">
        <h3>Edit Parking Lot</h3>
        <form id="lotEditForm" method="POST" action="/lot_edit">
            <input type="hidden" id="editLotId" name="lot_id">
            
            <div class="form-group">
                <label for="editLotName">Prime location name:</label>
                <input type="text" id="editLotName" name="prime_location_name" required>
            </div>
            
            <div class="form-group">
                <label for="editLotLocation">Address:</label>
                <input type="text" id="editLotLocation" name="address" required>
            </div>
            
            <div class="form-group">
                <label for="editTotalSpaces">pin code:</label>
                <input type="number" id="editTotalSpaces" name="pin_code" min="1" required>
            </div>

            
            <div class="form-group">
                <label for="editOccupiedSpaces">total spots:</label>
                <input type="number" id="editOccupiedSpaces" name="total_spots" min="0" required>
            </div>
            <div class="form-group">
                <label for="editOccupied">Cost:</label>
                <input type="number" id="editOccupied" name="cost" min="0" required>
            </div>
            
            <div class="form-buttons">
                <button type="submit" class="submit-btn">Update Lot</button>
                <button type="button" class="cancel-btn" onclick="closePopup('lotEditPopup')">Cancel</button>
            </div>
        </form>
    </div>
</div>
<!-- Create Parking Lot Popup -->
<div class="popup-overlay" id="createLotPopup">
    <div class="popup-form">
        <h3>Create New Parking Lot</h3>
        <form id="createLotForm" method="POST" action="/create_parking_lot">
            
            <div class="form-group">
                <label for="createLotName">prime_location_name:</label>
                <input type="text" id="createLotName" name="prime_location_name" placeholder="e.g., hari niwas mall" required>
            </div>
            
            <div class="form-group">
                <label for="createLotLocation">Address:</label>
                <input type="text" id="createLotLocation" name="address" placeholder="hari niwas mall,income tax main road,patna,bihar pin-800001" required>
            </div>
            
            <div class="form-group">
                <label for="createTotalSpaces">Pin code:</label>
                <input type="number" id="createTotalSpaces" name="pin_code" min="800001" max="899999" placeholder="800001" required>
            </div>
            <div class="form-group">
                <label for="createDescription">total spots:</label>
                <input type="text" id="createDescription" name="total_spots" placeholder="e.g., 20" required>
            </div>

            <div class="form-group">
                <label for="createElectricSpots">Electric Spots:</label>
                <input type="number" id="createElectricSpots" name="electric_spots" value="0" min="0" step="1" placeholder="how many electric spots e.g.: 0" required>
            </div>
            
            <div class="form-group">
                <label for="createPricePerHour">Price per Hour (‚Çπ):</label>
                <input type="number" id="createPricePerHour" name="price_per_hour" value="75" min="10" step="5" placeholder="75" required>
            </div>
            
            
            <div class="form-buttons">
                <button type="submit" class="submit-btn">Create Parking Lot</button>
                <button type="button" class="cancel-btn" onclick="closePopup('createLotPopup')">Cancel</button>
            </div>
        </form>
    </div>
</div>
<!-- Users Management Popup -->
<div class="popup-overlay" id="usersPopup">
    <div class="users-popup-content">
        <div class="users-popup-header">
            <h2>üôé Users Management</h2>
            <button class="close-popup-btn" onclick="closeUsersPopup()">
                <i class="ri-close-line"></i>
            </button>
        </div>
        
        <div class="users-popup-body">
            <!-- User Controls Section -->
            <div class="user-controls">
                <div class="user-actions-bar">
                    <div class="user-search">
                        <select class="search-dropdown" id="userSearchBy">
                            <option value="name">Search by Name</option>
                            <option value="email">Search by Email</option>
                            <option value="user_id">Search by User ID</option>
                        </select>
                        <input type="text" class="search-input" id="userSearchInput" placeholder="Search users...">
                    </div>
                    <button class="create-user-btn" onclick="openCreateUserPopup()">
                        <i class="ri-user-add-line"></i> Create New User
                    </button>
                </div>
            </div>

            <!-- Users Grid -->
            <div class="user-list" id="userGrid">
                <!--jinja user cards-->
                {% for user in users %}
                <div class="user-card" data-name="{{ user.username }}" data-email="{{ user.email }}" data-userid="{{ user.id }}">
                    <div class="user-header">
                        <span class="user-name">{{ user.username }}</span>
                        <span class="user-id">{{ user.id }}</span>
                    </div>
                    <div class="user-info">
                        <p>Email: <span class="user-email">{{ user.email }}</span></p>
                        <p>address: <span class="user-phone">{{ user.address }}</span></p>
                    </div>
                    <div class="user-actions">
                        <button class="action-btn" onclick="openUserEditPopup('{{ user.id }}', '{{ user.username }}', '{{ user.email }}', '{{user.password}}','{{ user.address }}')">Edit</button>
                        <button class="action-btn delete-btn" onclick="deleteUser('{{ user.id }}', '{{ user.username }}')">Delete</button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<!-- Create User Popup -->
<div class="popup-overlay" id="createUserPopup">
    <div class="popup-form">
        <h3>Create New User</h3>
        <form id="createUserForm" method="POST" action="/user_create">
            <div class="form-group">
                <label for="createUserName">User Name:</label>
                <input type="text" id="createUserName" name="name" placeholder="e.g., rituraj" required>
            </div>
            <div class="form-group">
                <label for="createUserEmail">Email:</label>
                <input type="email" id="createUserEmail" name="email" placeholder="mymail@exemple.com" required>
            </div>
            <div class="form-group">
                <label for="createUserAddress">Address:</label>
                <input type="text" id="createUserAddress" name="address" placeholder="e.g., patna bihar india" required>
            </div>
            <div class="form-group">
                <label for="createUserPassword">Password:</label>
                <input type="password" id="createUserPassword" name="password" placeholder="Enter password" required>
            </div>
            <div class="form-buttons">
                <button type="submit" class="submit-btn">Create User</button>
                <button type="button" class="cancel-btn" onclick="closePopup('createUserPopup')">Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-- Delete User Confirmation Popup -->
<div class="popup-overlay" id="deleteUserPopup">
    <div class="popup-form">
        <h3>Delete User</h3>
        <form id="deleteUserForm" method="POST" action="/user_delete">
            <input type="hidden" id="deleteUserId" name="user_id">
            <div class="delete-warning">
                <i class="ri-alert-line" style="font-size: 3rem; color: #dc3545; margin-bottom: 15px;"></i>
                <p>Are you sure you want to delete user <strong id="deleteUserName"></strong>?</p>
                <p style="color: #dc3545; font-size: 0.9rem;">This action cannot be undone.</p>
            </div>
            <div class="form-buttons">
                <button type="submit" class="submit-btn" style="background: #dc3545;">Delete User</button>
                <button type="button" class="cancel-btn" onclick="closePopup('deleteUserPopup')">Cancel</button>
            </div>
        </form>
    </div>
</div>
<!-- Booking Management Popup -->
<div class="popup-overlay" id="bookingPopup">
    <div class="booking-popup-content">
        <div class="booking-popup-header">
            <h2>üìã Booking Management</h2>
            <button class="close-popup-btn" onclick="closeBookingPopup()">
                <i class="ri-close-line"></i>
            </button>
        </div>
        
        <div class="booking-popup-body">
            <!-- Booking Controls Section -->
            <div class="booking-controls">
                <div class="booking-actions-bar">
                    <div class="booking-search">
                        <select class="search-dropdown" id="bookingSearchBy">
                            <option value="all">All Bookings</option>
                            <option value="active">Active Bookings</option>
                            <option value="completed">Completed Bookings</option>
                            <option value="cancelled">Cancelled Bookings</option>
                        </select>
                        <input type="text" class="search-input" id="bookingSearchInput" placeholder="Search by user ID, lot name...">
                    </div>
                    <button class="create-user-btn" onclick="openCreateBookingPopup()">
                        <i class="ri-add-line"></i> Create New Booking
                    </button>
                </div>
            </div>

            <!-- Booking Stats -->
            <div class="booking-stats">
                <div class="stat-card">
                    <div class="stat-number">128</div>
                    <div class="stat-label">Total Bookings</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">45</div>
                    <div class="stat-label">Active Now</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">‚Çπ12,450</div>
                    <div class="stat-label">Today's Revenue</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">83</div>
                    <div class="stat-label">Completed</div>
                </div>
            </div>

            <!-- Booking List -->
            <div class="booking-list" id="bookingGrid">
                <div class="booking-card" data-status="active" data-user="usr001" data-lot="velachery central">
                    <div class="booking-header">
                        <span class="booking-id">BK001</span>
                        <span class="booking-status status-active">Active</span>
                    </div>
                    <div class="booking-info">
                        <p><strong>User:</strong> USR001 - John Doe</p>
                        <p><strong>Parking Lot:</strong> Velachery Central - Spot A1</p>
                        <p><strong>Duration:</strong> 2.5 hrs (Started: 10:30 AM)</p>
                        <p><strong>Amount:</strong> ‚Çπ150</p>
                        <p><strong>Phone:</strong> +91 9876543210</p>
                    </div>
                    <div class="booking-actions">
                        <button class="action-btn" onclick="editBooking('BK001')">Edit</button>
                        <button class="action-btn" onclick="completeBooking('BK001')">Complete</button>
                        <button class="action-btn delete-btn" onclick="cancelBooking('BK001')">Cancel</button>
                    </div>
                </div>

                <div class="booking-card" data-status="active" data-user="usr002" data-lot="t nagar plaza">
                    <div class="booking-header">
                        <span class="booking-id">BK002</span>
                        <span class="booking-status status-active">Active</span>
                    </div>
                    <div class="booking-info">
                        <p><strong>User:</strong> USR002 - Jane Smith</p>
                        <p><strong>Parking Lot:</strong> T. Nagar Plaza - Spot B3</p>
                        <p><strong>Duration:</strong> 4 hrs (Started: 11:15 AM)</p>
                        <p><strong>Amount:</strong> ‚Çπ240</p>
                        <p><strong>Phone:</strong> +91 9876543211</p>
                    </div>
                    <div class="booking-actions">
                        <button class="action-btn" onclick="editBooking('BK002')">Edit</button>
                        <button class="action-btn" onclick="completeBooking('BK002')">Complete</button>
                        <button class="action-btn delete-btn" onclick="cancelBooking('BK002')">Cancel</button>
                    </div>
                </div>

                <div class="booking-card" data-status="completed" data-user="usr003" data-lot="anna nagar mall">
                    <div class="booking-header">
                        <span class="booking-id">BK003</span>
                        <span class="booking-status status-completed">Completed</span>
                    </div>
                    <div class="booking-info">
                        <p><strong>User:</strong> USR003 - Mike Johnson</p>
                        <p><strong>Parking Lot:</strong> Anna Nagar Mall - Spot C2</p>
                        <p><strong>Duration:</strong> 1.5 hrs (Completed: 1:30 PM)</p>
                        <p><strong>Amount:</strong> ‚Çπ90</p>
                        <p><strong>Phone:</strong> +91 9876543212</p>
                    </div>
                    <div class="booking-actions">
                        <button class="action-btn" onclick="viewBookingDetails('BK003')">View Details</button>
                        <button class="action-btn delete-btn" onclick="deleteBooking('BK003')">Delete</button>
                    </div>
                </div>

                <div class="booking-card" data-status="cancelled" data-user="usr004" data-lot="porur it park">
                    <div class="booking-header">
                        <span class="booking-id">BK004</span>
                        <span class="booking-status status-cancelled">Cancelled</span>
                    </div>
                    <div class="booking-info">
                        <p><strong>User:</strong> USR004 - Sarah Wilson</p>
                        <p><strong>Parking Lot:</strong> Porur IT Park - Spot D1</p>
                        <p><strong>Duration:</strong> 3 hrs (Cancelled: 2:45 PM)</p>
                        <p><strong>Amount:</strong> ‚Çπ0 (Refunded)</p>
                        <p><strong>Phone:</strong> +91 9876543213</p>
                    </div>
                    <div class="booking-actions">
                        <button class="action-btn" onclick="viewBookingDetails('BK004')">View Details</button>
                        <button class="action-btn delete-btn" onclick="deleteBooking('BK004')">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Create Booking Popup -->
<div class="popup-overlay" id="createBookingPopup">
    <div class="popup-form">
        <h3>Create New Booking</h3>
        <form id="createBookingForm" method="POST" action="/booking_create">
            <div class="form-group">
                <label for="createBookingUser">User ID:</label>
                <input type="text" id="createBookingUser" name="user_id" placeholder="e.g., USR001" required>
            </div>
            <div class="form-group">
                <label for="createBookingLot">Parking Lot:</label>
                <select id="createBookingLot" name="lot_id" required>
                    <option value="">Select Parking Lot</option>
                    <option value="LOT001">Velachery Central</option>
                    <option value="LOT002">T. Nagar Plaza</option>
                    <option value="LOT003">Anna Nagar Mall</option>
                    <option value="LOT004">Porur IT Park</option>
                </select>
            </div>
            <div class="form-group">
                <label for="createBookingSpot">Parking Spot:</label>
                <input type="text" id="createBookingSpot" name="spot" placeholder="e.g., A1, B3" required>
            </div>
            <div class="form-group">
                <label for="createBookingDuration">Duration (hours):</label>
                <input type="number" id="createBookingDuration" name="duration" min="0.5" step="0.5" placeholder="2.5" required>
            </div>
            <div class="form-group">
                <label for="createBookingAmount">Amount (‚Çπ):</label>
                <input type="number" id="createBookingAmount" name="amount" min="10" placeholder="150" required>
            </div>
            <div class="form-buttons">
                <button type="submit" class="submit-btn">Create Booking</button>
                <button type="button" class="cancel-btn" onclick="closePopup('createBookingPopup')">Cancel</button>
            </div>
        </form>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>